---
import { Image } from "astro:assets";
import logo from "../assets/images/logo.png";
import { Icon } from "astro-icon/components";
---

<nav
  id="navbar"
  class="z-50 navbar flex flex-row w-full items-center justify-between p-4 fixed bg-indigo-100 bg-opacity-50 shadow-md transition-all ease-in-out duration-300"
>
  <Image src={logo} alt="Logo" height="80" />
  <ul
    class="flex gap-4 w-full lg:w-auto transition-all ease-in-out duration-500"
  >
    <li class="">
      <a href="/" class="">Home</a>
    </li>
    <li><a href="servicios">Servicios</a></li>
    <li><a href="galeria">Galeria</a></li>
    <!-- <li><a href="mis-obras">Obras</a></li> -->
    <li><a href="biografia">Biografia</a></li>
    <li><a href="contact">Contacto</a></li>
  </ul>
  <button
    class="absolute right-1 top-2 text-2xl text-blue-950 lg:hidden bg-white p-4 rounded-lg transition-all ease-in-out duration-300 hover:bg-blue-950 hover:text-white"
    id="toggleMenu"
  >
    <!-- si esta abierto el menu muestra una X  de lo contrario muesta el icono  -->

    <Icon name="hamburger" />
  </button>
</nav>

<style>
  a {
    background-color: #0f1341;
    font-weight: bold;
    transition: all 0.3s ease-in-out;
    border-radius: 5px;
    color: #fff;
    padding: 10px 40px;
    &:active {
      color: #ce2a2a;
    }
    &:hover {
      border: 1px solid #fff;
      color: gray;
      height: 100%;
    }
  }

  .navbar.scrolled {
    background: #0f1341;
  }

  /* responsive menu */
  @media (max-width: 768px) {
    a {
      display: block;
      border-radius: 0;
    }

    .navbar {
      flex-direction: column;
      align-items: flex-start;
      /* gap: 1rem; */
      padding: 0;
    }
    .navbar ul {
      /* display: none; */
      height: 0;
      overflow: hidden;
    }

    .navbar ul.active {
      /* display: flex; */
      height: auto;
      flex-direction: column;
      gap: 0;
    }
  }
</style>

<script>
  window.addEventListener("scroll", function () {
    const navbar = document.getElementById("navbar") as HTMLElement;
    if (window.scrollY > 0) {
      navbar?.classList.add("scrolled");
    } else {
      navbar?.classList.remove("scrolled");
    }
  });

  const toggleMenu = document.getElementById("toggleMenu");
  const navbar = document.getElementById("navbar");
  toggleMenu?.addEventListener("click", function () {
    navbar?.querySelector("ul")?.classList.toggle("active");
  });

  // close menu when click on a link
  navbar?.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", function () {
      navbar?.querySelector("ul")?.classList.remove("active");
    });
  });
</script>
